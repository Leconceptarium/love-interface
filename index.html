<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Battle Quiz ðŸ’” CRÃˆVE-CÅ’UR</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Rubik', sans-serif;
      text-align: center;
      background: linear-gradient(180deg, #1a0f14, #0e0e0e);
      color: #fff;
      margin: 0;
      padding: 30px;
    }
    h1 { font-family: 'Great Vibes', cursive; font-size: 3.2rem; color: #ff4d6d; }
    h2 { font-size: 1.8rem; color: #ff95a5; }
    .team { width: 40%; background: #1c1c1c; padding: 15px; border-radius: 12px; margin: 10px auto; }
    .team-name { color: #ff95a5; }
    .life-bar { background: #333; height: 35px; border-radius: 20px; overflow: hidden; }
    .life-fill { background: linear-gradient(90deg, #ff4d6d, #ff95a5); height: 100%; }
    iframe { width: 100%; height: 600px; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>Battle Quiz ðŸ’”</h1>
  <section id="jauges"></section>
  <section id="jeu-wordwall">
    <iframe src="https://wordwall.net/fr/embed/24ba096164424d1281d892f070aac428"></iframe>
  </section>

  <script>
    const urls = {
      cupidon: "cupidon.html",
      rencard: "rencard.html",
      blindtest: "blindtest.html",
      tentacule: "tentacule.html",
      impossible: "impossible.html",
      accueil: "index.html"
    };

    function construireEquipes() {
      const container = document.getElementById("jauges");
      container.innerHTML = "";
      let i = 1;
      while (localStorage.getItem(`team${i}name`)) {
        const nom = localStorage.getItem(`team${i}name`);
        const vie = localStorage.getItem(`life${i}`) || 100;
        container.innerHTML += `
          <div class="team">
            <h3 class="team-name">${nom}</h3>
            <div class="life-bar">
              <div class="life-fill" style="width:${vie}%"></div>
            </div>
          </div>`;
        i++;
      }
    }

    function updateGameView() {
      const manche = localStorage.getItem("mancheActive") || "accueil";
      const slide = parseInt(localStorage.getItem("slideIndex")) || 0;
      const show = localStorage.getItem("reveal") === "true";
      const container = document.getElementById("jeu-wordwall");

      if (manche === "accueil") {
        container.innerHTML = `<iframe src="https://wordwall.net/fr/embed/24ba096164424d1281d892f070aac428"></iframe>`;
      } else if (urls[manche]) {
        container.innerHTML = `<iframe src="${urls[manche]}?slide=${slide}&reveal=${show}"></iframe>`;
      }
    }

    function syncChanges() {
      construireEquipes();
      updateGameView();
    }

    window.addEventListener("storage", syncChanges);
    setInterval(syncChanges, 500);

    syncChanges();
  </script>
</body>
</html>
